/*! For license information please see 271.6477fb97.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[271],{1271:(e,s,r)=>{r.r(s),r.d(s,{default:()=>w});var a=r(5043),t=r(3003),l=r(4058),c=r(3216),i=r(5475),d=r(3958);const h="ChatPage_message__+z4hp",n="ChatPage_message_photo__AbpK1",o="ChatPage_message_userName__-cIIL",x="ChatPage_message_text__T7KZl";var u=r(5314),m=r(2615),g=r(5285),j=r(381),p=r(579);const{TextArea:v}=m.A,_=()=>{const e=(0,t.wA)(),s=(0,t.d4)((e=>e.chat.status));return(0,a.useEffect)((()=>(e((0,l._E)()),()=>{e((0,l.Ui)())})),[]),(0,p.jsxs)("div",{children:["ready"!==s&&(0,p.jsx)(j.A,{}),"error"===s&&(0,p.jsx)("div",{children:"Some error occured. Refresh the page"}),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(f,{}),(0,p.jsx)(C,{})]})]})},f=()=>{const e=(0,t.d4)((e=>e.chat.messages)),s=(0,a.useRef)(null),[r,l]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{var e;r&&(null===(e=s.current)||void 0===e||e.scrollIntoView({behavior:"smooth"}))}),[e]),(0,p.jsxs)("div",{style:{height:"75vh",overflowY:"auto"},onScroll:e=>{const s=e.currentTarget;Math.abs(s.scrollHeight-s.scrollTop-s.clientHeight)<100?!r&&l(!0):r&&l(!1)},children:[e.map(((e,s)=>(0,p.jsx)(y,{message:e},e.id))),(0,p.jsx)("div",{ref:s})]})},y=a.memo((e=>{let{message:s}=e;return(0,p.jsxs)("div",{className:h,children:[(0,p.jsx)("div",{className:n,children:(0,p.jsx)(i.k2,{to:"/profile/"+s.userId,children:s.photo?(0,p.jsx)("img",{style:{width:"50px"},src:s.photo,alt:"\u042e\u0437\u0435\u0440"}):(0,p.jsx)("img",{style:{width:"50px"},src:u,alt:"\u042e\u0437\u0435\u0440"})})}),(0,p.jsx)("div",{className:o,children:(0,p.jsx)(i.k2,{to:"/profile/"+s.userId,children:s.userName})}),(0,p.jsx)("div",{className:x,children:s.message})]})})),C=()=>{const[e,s]=(0,a.useState)(""),r=(0,t.wA)(),c=(0,t.d4)((e=>e.chat.status));return(0,p.jsxs)("div",{children:[(0,p.jsx)("div",{children:(0,p.jsx)(v,{maxLength:100,placeholder:"100 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432 - \u043c\u0430\u043a\u0441\u0438\u043c\u0443\u043c",autoSize:!0,style:{margin:"8px 0 8px 0"},name:"",id:"",onChange:e=>s(e.currentTarget.value),value:e})}),(0,p.jsx)("div",{children:(0,p.jsx)(g.Ay,{disabled:"ready"!==c,onClick:()=>{e&&(r((0,l._z)(e)),s(""))},children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})})]})},w=()=>(0,t.d4)(d.g1)?(0,p.jsx)("div",{children:(0,p.jsx)(_,{})}):(0,p.jsx)(c.C5,{to:"/login",replace:!0})}}]);
//# sourceMappingURL=271.6477fb97.chunk.js.map